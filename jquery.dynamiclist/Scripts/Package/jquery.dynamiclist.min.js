!function(e){var t={mobile:"mobile",kendo:"kendo",ui:"ui",bootstrap:"bootstrap",none:"none"},i={init:function(n){return n=e.extend({},e.fn.dynamiclist.defaults,n),this.each(function(){var a=e(this),d=a.data("dynamiclist");if(!d){if(a.wrap("<div class='dynamic-list-container'></div>"),"ui"===n.uiType&&a.parent().addClass("ui-widget ui-widget-content ui-corner-all"),a.addClass("dynamic-list"),n.selector=a.selector,"table"===n.listType&&(e("thead tr",a).append("<th></th>"),e("tbody tr",a).append("<td class='delete-cell'></td>"),e("tfoot tr",a).append("<td></td>")),e(n.itemSelector,a).each(function(t){var a=i._getIndexName(n.htmlFieldPrefix,n.property);i._appendRemoveAndIndex(e(this),t,a,n.removeLabel,n.uiType,n.listType,n.itemRemoved)}),"table"===n.listType){var o=a.find("thead td, thead th").length,l=a.find("tfoot");0===l.length&&(a.append("<tfoot></tfoot>"),l=a.find("tfoot")),l.append('<tr><td colspan="'+o+'" class="add-item-container ui-widget-header k-header ui-corner-bottom"><button class="add-item">'+(n.addLabel||"")+"</button></td></tr>")}else a.append('<li class="add-item-container ui-widget-header k-header ui-corner-bottom" data-role="list-divider"><button class="add-item">'+(n.addLabel||"")+"</button></li>");n.uiType===t.mobile&&(a.attr("data-inset","true"),a.listview());var r=a.find(".add-item"),s=null!=n.addLabel&&""!==n.addLabel;if(n.uiType===t.mobile)r.buttonMarkup({icon:"plus",iconpos:s?"left":"notext"});else if(n.uiType===t.kendo)r.prepend("<span class='k-icon k-i-plus'></span>");else if(n.uiType===t.ui){var p={icons:{primary:"ui-icon-new ui-icon-circle-plus"}};s?p.label=n.addLabel:p.text=!1,r.button(p)}else n.uiType===t.bootstrap&&(r.addClass("btn btn-default"),r.prepend("<span class='glyphicon glyphicon-plus'></span>"));r.click(function(){e(this).prop("disabled",!0);var d=i._getNewIndex(a,n.itemSelector),o=i._getNewItemPrefix(n.htmlFieldPrefix,n.property,d),l="function"==typeof n.newItemUrl?n.newItemUrl():n.newItemUrl;return l.indexOf("?")<0&&(l+="?"),e.get(l+"&htmlFieldPrefix="+o,function(o){if("table"===n.listType)a.find("tbody").append(o),a.find(n.itemSelector+":last").append("<td class='delete-cell'>");else{var l=a.find(n.itemSelector+":last");l.length>0?l.after(o):a.prepend(o)}var s=e(n.itemSelector+":last",a),p=i._getIndexName(n.htmlFieldPrefix,n.property);i._appendRemoveAndIndex(s,d,p,n.removeLabel,n.uiType,n.listType,n.itemRemoved),e.validator&&e.validator.unobtrusive&&e.validator.unobtrusive.parseDynamicContent&&e.validator.unobtrusive.parseDynamicContent(s),n.uiType===t.mobile&&(e(e.mobile.textinput.prototype.options.initSelector,s).textinput(),a.listview("refresh")),n.itemAdded&&n.itemAdded(s),r.prop("disabled",!1)}).error(function(e){401===e.status&&alert("Your session has timed out. Please refresh the page and try again.")}),!1}),a.data("dynamiclist",n),n.itemAdded&&a.each(function(e,t){$(t).each(function(e,t){n.itemAdded(t)})})}})},_appendRemoveAndIndex:function(i,n,a,d,o,l,r){var s='<button type="button" class="delete-item">'+(d||"")+"</button>",p='<input type="hidden" name="'+a+'" class="index" value="'+n+'" />',c=s+p;"table"===l?i.find("td.delete-cell").append(c):i.append(c),e(".delete-item",i).click(function(){i.remove(),r&&r(i)});var u=null!=d&&""!=d;if(o===t.mobile)e(".delete-item",i).buttonMarkup({icon:"delete",iconpos:"notext",inline:"true"});else if(o===t.kendo)e(".delete-item",i).prepend("<span class='k-icon k-i-cancel'></span>");else if(o===t.ui){var m={text:u,label:d,icons:{primary:"ui-icon-delete ui-icon-trash"}};e(".delete-item",i).button(m)}else o===t.bootstrap&&e(".delete-item",i).addClass("btn btn-danger").prepend("<span class='glyphicon glyphicon-remove'></span>")},_getBaseItemPrefix:function(e,t){var i=e;return""!==i&&(i+="."),i+=t},_getNewItemPrefix:function(e,t,n){return i._getBaseItemPrefix(e,t)+"["+n+"]"},_getIndexName:function(e,t){return i._getBaseItemPrefix(e,t)+".Index"},_getNewIndex:function(t,i){var n=e(i,t);if(0==n.length)return 0;var a=0;return n.each(function(){var t=parseInt(e("input.index",e(this)).val());isNaN(t)&&(t=0),a=Math.max(a,t)}),a+1},options:function(t){return this.each(function(){var i=e(this),n=i.data("dynamiclist")||{};t=e.extend({},n,t),i.dynamiclist("destroy").dynamiclist("init",t)})},add:function(){return this.each(function(){var t=e(this);t.find(".add-item").click()})},destroy:function(){return this.each(function(){var t=e(this);t.removeData("dynamiclist")})}};e.fn.dynamiclist=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.dynamiclist"):i.init.apply(this,arguments)},e.fn.dynamiclist.defaults={uiType:"undefined"!=typeof e.mobile?"mobile":"undefined"!=typeof kendo?"kendo":"undefined"!=typeof e.ui?"ui":"bootstrap",itemSelector:".item",addLabel:"Additional",removeLabel:"Remove",htmlFieldPrefix:"",property:"Items",newItemUrl:"NewItem",listType:"list",itemAdded:function(e){},itemRemoved:function(e){}}}(jQuery);
//# sourceMappingURL=jquery.dynamiclist.min.js.map